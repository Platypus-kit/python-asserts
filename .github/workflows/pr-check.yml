name: PR check
on: 
  pull_request: 
    branches:  
      - develop
  push: 
    branches:
      - main
jobs: 
  linter_and_test: 
    runs-on: ubuntu-latest
    steps: 
      - name: checkout repository
        uses: actions/checkout@v4
      - name: setup python
        uses: actions/setup-python@v5
        with: 
          python-version: "3.13"
      - name: install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
      - name: run linter
        run: flake8 . --max-line-length=100 --statistics
      - name: run tests 
        run: pytest --junitxml=test-results.xml
      - name: get artifacts
        uses: actions/upload-artifact@v4 
        with:
          name: test-results
          path: test-result.xml